#!/usr/bin/env bash

# a simple Bash script to reload Gunicorn in a graceful way.

# Define the Gunicorn service name
SERVICE_NAME="gunicorn"

# Function to reload Gunicorn gracefully
reload_gunicorn() {
    # Get the PID of the Gunicorn master process
    PID=$(pgrep -f "$SERVICE_NAME")

    if [ -n "$PID" ]; then
        # Send the HUP signal to the master process
        kill -HUP "$PID"

        # Optionally, you can check the status after reload
        sleep 10

        echo "Graceful reload complete."
    else
        echo "Gunicorn service is not running."
    fi
}

# Reload Gunicorn
reload_gunicorn
